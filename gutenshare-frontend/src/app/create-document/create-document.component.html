<h2>Create a new Document</h2>

<form [formGroup]="createDocumentForm" (ngSubmit)="doPost(createDocumentForm.value)">
  <div class="form-group row">
    <label for="document_name_input" class="col-sm-2 col-form-label">Name</label>
    <div class="col-sm-10">
      <input formControlName="name" type="text" class="form-control" id="document_name_input"
             placeholder="Numerik Zusammenfassung">
      <p class="text-warning" *ngIf="!createDocumentForm.controls['name'].valid
      && createDocumentForm.controls['name'].touched">{{ requiredAlert }}</p>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2 col-form-label">Type</label>
    <div class="col-sm-10">
      <div class='form-check form-check-inline btn-group btn-group-toggle' data-toggle="buttons"
           *ngFor="let docType of documentTypes, let n = index">
        <label class="btn btn-outline-secondary" [ngClass]="{'btn-outline-secondary': docType!=documentType,
        'btn-secondary': docType===documentType}" [for]='"documenttype_radio_"+docType'>
        <input
          (click)="setDocumentType(n)"
          class='form-check-input hidden'
          name='type'
          formControlName="type"
          type='radio'
          [id]='"documenttype_radio_"+docType'
          [value]="docType"
          autocomplete="off"
        />
          {{docType}}
        </label>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2 col-form-label">Tags</label>
    <div formArrayName="tags" class="col-sm-10">
      <div class="form-inline document_tag_line" *ngFor="let tag of createDocumentForm.get('tags').controls;
      let i = index; let isLast = last;">
        <input [formControlName]="i" type="text" class="col-sm-9 form-control" [placeholder]='"Tag " + (i+1)'>
        <button (click)="removeTag(i)" type="button" [disabled]="i==0"
                class="col-sm-1 btn btn-outline-secondary">-</button>
        <button *ngIf="isLast" (click)="addTag()"
                type="button" class="col-sm-1 btn btn-outline-secondary">+</button>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2 col-form-label" for="document_description_input">Description</label>
    <div class="col-sm-10">
      <textarea formControlName="description" class="form-control" id="document_description_input"
                rows="3" placeholder="bla bla"></textarea>
      <p class="text-warning" *ngIf="!createDocumentForm.controls['description'].valid
      && createDocumentForm.controls['description'].touched">{{ descriptionAlert }}</p>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-sm-10 offset-sm-2">
      <button type="submit" class="btn" [ngClass]="{'btn-outline-primary': createDocumentForm.valid,
      'btn-outline-error': !createDocumentForm.valid}" [disabled]="!createDocumentForm.valid">Submit</button>
    </div>
  </div>

</form>

<p>Form value: {{ createDocumentForm.value | json }}</p>
